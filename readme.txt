Статистическая цветокоррекция
Рассмотрим задачу, цель которой придать целевому изображению колорит некоторого другого изображения так, чтобы целевое изображение выглядело естественным и сохранило свои особенности (композицию, контрастность, светотень).

Метод решения поставленной задачи основан на использовании статистических данных.

Суть метода

Итак, заданы целевое изображение и изображение-источник цвета. Метод заключается в том, что прежде всего вычисляются математическое ожидание E и дисперсия цвета D на обоих изображениях для каждого цветового канала (цветовое пространство, в котором заданы изображения, изначально не уточняется):
 
где С - данный цветовой канал j-го пиксела в заданном цветовом пространстве;
n - количество пикселов данного изображения;
E - математическое ожидание;
D - дисперсия;
индексы s, t означают принадлежность соответственно изображению-источнику цвета и целевому изображению.

Алгоритм состоит в том, что к каждому каналу каждого пиксела целевого изображения применяется следующее преобразование:
 
После применения алгоритма матожидание цвета целевого изображения становится равным матожиданию изображения-источника цвета. Аналогично меняется дисперсия. Или, другими словами, гистограмма целевого изображения сдвигается и растягивается.

Алгоритм сам по себе прост и может выполняться в любом цветовом пространстве, но результат его работы достаточно сильно зависит от выбора пространства.
